import {
  ChangeDetectionStrategy,
  Component,
  effect,
  input,
  signal,
} from '@angular/core';

@Component({
  changeDetection: ChangeDetectionStrategy.OnPush,
  host: {
    '[style.display]': '"block"',
    '[style.position]': '"relative"',
  },
  imports: [],
  selector: 'app-shape',
  styles: `
    svg {
      width: 100%;
      height: auto;
      display: block;
      transform-origin: center;
      transform-box: fill-box;
      animation: app-shape-spin 90s linear infinite;
    }
    svg path {
      transition: 5s ease-in-out;
    }

    @keyframes app-shape-spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      svg {
        animation: none;
      }
    }
  `,
  templateUrl: './shape.html',
})
export class Shape {
  public readonly changeSignal = input<unknown>();

  // Inline shape data (extracted from the SVG files)
  private readonly shapes = [
    {
      d: 'M122.064 11.459C143.093 -3.81967 171.569 -3.81965 192.598 11.459L289.926 82.1714C310.955 97.45 319.754 124.532 311.722 149.253L274.546 263.668C266.514 288.39 243.476 305.127 217.483 305.127H97.1798C71.1862 305.127 48.1489 288.39 40.1164 263.668L2.9407 149.253C-5.09176 124.532 3.70774 97.45 24.737 82.1714L122.064 11.459Z',
      viewBox: '0 0 315 306',
    },
    {
      d: 'M89.4155 25.7498C106.981 12.991 115.763 6.61156 125.124 3.44021C138.663 -1.14674 153.337 -1.14674 166.876 3.44021C176.237 6.61156 185.019 12.991 202.585 25.7498L242.083 54.4402C252.514 62.017 257.729 65.8054 261.981 70.3534C268.125 76.9261 272.839 84.702 275.823 93.1893C277.888 99.062 278.834 105.438 280.725 118.189L288.038 167.501C291.355 189.87 293.014 201.055 291.34 211.136C288.918 225.718 281.6 239.04 270.59 248.907C262.979 255.728 252.649 260.329 231.987 269.532L185.176 290.382C172.707 295.935 166.473 298.712 160.064 300.131C150.8 302.182 141.2 302.182 131.936 300.131C125.527 298.712 119.293 295.935 106.824 290.382L60.0131 269.532C39.3515 260.329 29.0207 255.728 21.4097 248.907C10.4005 239.04 3.08192 225.718 0.660161 211.136C-1.01406 201.055 0.644655 189.87 3.96208 167.501L11.2752 118.189C13.1662 105.437 14.1117 99.0619 16.1768 93.1892C19.1612 84.702 23.8747 76.9261 30.0191 70.3534C34.2706 65.8054 39.4862 62.017 49.9172 54.4402L89.4155 25.7498Z',
      viewBox: '0 0 292 302',
    },
    {
      d: 'M136.725 13.1869C147.261 -4.3956 172.739 -4.39563 183.275 13.1868L195.124 32.9597C201.268 43.2136 213.399 48.2385 224.995 45.3327L247.355 39.7294C267.237 34.7468 285.253 52.7627 280.271 72.6455L274.667 95.0052C271.762 106.601 276.786 118.732 287.04 124.876L306.813 136.725C324.396 147.261 324.396 172.739 306.813 183.275L287.04 195.124C276.786 201.268 271.762 213.399 274.667 224.995L280.271 247.355C285.253 267.237 267.237 285.253 247.355 280.271L224.995 274.667C213.399 271.762 201.268 276.786 195.124 287.04L183.275 306.813C172.739 324.396 147.261 324.396 136.725 306.813L124.876 287.04C118.732 276.786 106.601 271.762 95.0052 274.667L72.6455 280.271C52.7627 285.253 34.7468 267.237 39.7294 247.355L45.3327 224.995C48.2385 213.399 43.2136 201.268 32.9597 195.124L13.1869 183.275C-4.3956 172.739 -4.39563 147.261 13.1868 136.725L32.9597 124.876C43.2136 118.732 48.2385 106.601 45.3327 95.0052L39.7294 72.6455C34.7468 52.7627 52.7627 34.7468 72.6455 39.7294L95.0052 45.3327C106.601 48.2385 118.732 43.2136 124.876 32.9597L136.725 13.1869Z',
      viewBox: '0 0 320 320',
    },
    {
      d: 'M246.453 38.8118C256.405 39.4881 261.381 39.8263 265.404 41.5853C271.223 44.1305 275.87 48.7766 278.415 54.5965C280.174 58.6186 280.512 63.5948 281.188 73.5471L282.732 96.2586C283.005 100.284 283.142 102.296 283.579 104.219C284.212 106.997 285.31 109.648 286.827 112.059C287.877 113.728 289.203 115.248 291.856 118.288L306.824 135.438C313.384 142.954 316.663 146.712 318.263 150.8C320.579 156.715 320.579 163.285 318.263 169.2C316.663 173.288 313.384 177.046 306.824 184.562L291.856 201.712C289.203 204.752 287.877 206.272 286.827 207.941C285.31 210.352 284.212 213.003 283.579 215.781C283.142 217.704 283.005 219.716 282.732 223.741L281.188 246.453C280.512 256.405 280.174 261.381 278.415 265.404C275.87 271.223 271.223 275.87 265.404 278.415C261.381 280.174 256.405 280.512 246.453 281.188L223.741 282.732C219.716 283.005 217.704 283.142 215.781 283.579C213.003 284.212 210.352 285.31 207.941 286.827C206.272 287.877 204.752 289.203 201.712 291.856L184.562 306.824C177.046 313.384 173.288 316.663 169.2 318.263C163.285 320.579 156.715 320.579 150.8 318.263C146.712 316.663 142.954 313.384 135.438 306.824L118.288 291.856C115.248 289.203 113.728 287.877 112.059 286.827C109.648 285.31 106.997 284.212 104.219 283.579C102.296 283.142 100.284 283.005 96.2587 282.732L73.5471 281.188C63.5947 280.512 58.6186 280.174 54.5965 278.415C48.7766 275.87 44.1305 271.223 41.5853 265.404C39.8263 261.381 39.4881 256.405 38.8118 246.453L37.2684 223.741C36.9949 219.716 36.8581 217.704 36.4206 215.781C35.7883 213.003 34.6903 210.352 33.173 207.941C32.123 206.272 30.7965 204.752 28.1437 201.712L13.1756 184.562C6.61643 177.046 3.33687 173.288 1.73662 169.2C-0.578875 163.285 -0.578874 156.715 1.73662 150.8C3.33687 146.712 6.61643 142.954 13.1756 135.438L28.1437 118.288C30.7965 115.248 32.123 113.728 33.173 112.059C34.6903 109.648 35.7883 106.997 36.4206 104.219C36.8581 102.296 36.9949 100.284 37.2684 96.2587L38.8118 73.5471C39.4881 63.5948 39.8263 58.6186 41.5853 54.5965C44.1305 48.7766 48.7766 44.1305 54.5965 41.5853C58.6186 39.8263 63.5948 39.4881 73.5471 38.8118L96.2586 37.2684C100.284 36.9949 102.296 36.8581 104.219 36.4206C106.997 35.7883 109.648 34.6903 112.059 33.173C113.728 32.123 115.248 30.7966 118.288 28.1437L135.438 13.1756C142.954 6.61644 146.712 3.33687 150.8 1.73662C156.715 -0.578875 163.285 -0.578875 169.2 1.73662C173.288 3.33687 177.046 6.61644 184.562 13.1756L201.712 28.1437C204.752 30.7966 206.272 32.123 207.941 33.173C210.352 34.6903 213.003 35.7883 215.781 36.4206C217.704 36.8581 219.716 36.9949 223.741 37.2684L246.453 38.8118Z',
      viewBox: '0 0 320 320',
    },
    {
      d: 'M186.389 6.47298C249.109 -20.7672 312.767 42.8908 285.527 105.611L281.023 115.981C272.707 135.13 272.707 156.87 281.023 176.019L285.527 186.389C312.767 249.109 249.109 312.767 186.389 285.527L176.019 281.023C156.87 272.707 135.13 272.707 115.981 281.023L105.611 285.527C42.8908 312.767 -20.7672 249.109 6.47299 186.389L10.9768 176.019C19.2934 156.87 19.2934 135.13 10.9768 115.981L6.47298 105.611C-20.7672 42.8908 42.8908 -20.7672 105.611 6.47299L115.981 10.9768C135.13 19.2934 156.87 19.2934 176.019 10.9768L186.389 6.47298Z',
      viewBox: '0 0 292 292',
    },
    {
      d: 'M92.1855 22.5654C123.276 -7.52178 172.724 -7.52178 203.814 22.5654C213.328 31.7718 224.984 38.4811 237.738 42.0919C279.419 53.8924 304.142 96.5858 293.552 138.473C290.312 151.291 290.312 164.709 293.552 177.527C304.142 219.414 279.419 262.108 237.738 273.908C224.984 277.519 213.328 284.228 203.814 293.435C172.724 323.522 123.276 323.522 92.1855 293.435C82.672 284.228 71.016 277.519 58.262 273.908C16.5815 262.108 -8.14224 219.414 2.44755 177.527C5.68794 164.709 5.68794 151.291 2.44755 138.473C-8.14224 96.5858 16.5815 53.8924 58.262 42.0919C71.016 38.4811 82.672 31.7718 92.1855 22.5654Z',
      viewBox: '0 0 296 316',
    },
    {
      d: 'M112.67 19.7842C116.243 16.6394 118.029 15.067 119.671 13.7954C143.425 -4.59845 176.575 -4.59845 200.329 13.7954C201.971 15.067 203.757 16.6394 207.33 19.7842C208.526 20.8372 209.124 21.3636 209.724 21.8672C218.136 28.9247 228.171 33.7683 238.92 35.9594C239.688 36.1158 240.471 36.2562 242.038 36.537C246.719 37.3756 249.059 37.7949 251.075 38.2889C280.234 45.4346 300.902 71.4108 301.364 101.493C301.396 103.573 301.283 105.953 301.057 110.713C300.982 112.307 300.944 113.104 300.925 113.888C300.665 124.88 303.143 135.763 308.136 145.553C308.493 146.252 308.872 146.953 309.63 148.356C311.894 152.547 313.026 154.642 313.897 156.53C326.503 183.834 319.127 216.226 295.949 235.344C294.347 236.666 292.42 238.061 288.566 240.852C287.276 241.787 286.63 242.254 286.007 242.729C277.27 249.377 270.326 258.105 265.803 268.122C265.48 268.837 265.169 269.571 264.547 271.04C262.69 275.427 261.761 277.62 260.832 279.48C247.393 306.382 217.526 320.798 188.162 314.556C186.132 314.124 183.842 313.484 179.262 312.204C177.728 311.776 176.962 311.562 176.203 311.369C165.569 308.668 154.431 308.668 143.797 311.369C143.038 311.562 142.272 311.776 140.738 312.204C136.158 313.484 133.868 314.124 131.838 314.556C102.474 320.798 72.6071 306.382 59.168 279.48C58.2388 277.62 57.3102 275.427 55.453 271.04C54.8311 269.571 54.5202 268.837 54.1975 268.122C49.6741 258.105 42.7297 249.377 33.993 242.729C33.3696 242.254 32.7244 241.787 31.434 240.852C27.5801 238.061 25.6532 236.666 24.0507 235.344C0.872976 216.226 -6.50346 183.834 6.10268 156.53C6.97423 154.642 8.10625 152.547 10.3703 148.356C11.1283 146.953 11.5074 146.252 11.8636 145.553C16.8568 135.763 19.3353 124.88 19.0745 113.888C19.0559 113.104 19.0182 112.307 18.9426 110.713C18.7168 105.953 18.6039 103.573 18.6359 101.493C19.0982 71.4108 39.7665 45.4346 68.9252 38.2889C70.9411 37.7949 73.2814 37.3756 77.9618 36.537C79.5289 36.2562 80.3125 36.1158 81.0795 35.9594C91.8294 33.7683 101.864 28.9247 110.276 21.8672C110.876 21.3636 111.474 20.8372 112.67 19.7842Z',
      viewBox: '0 0 320 316',
    },
    {
      d: 'M126.828 14.2756C128.574 12.8498 129.448 12.1369 130.245 11.535C149.03 -2.64518 174.97 -2.64518 193.755 11.535C194.552 12.1369 195.425 12.8498 197.172 14.2756C197.952 14.9121 198.342 15.2303 198.727 15.5333C207.567 22.4788 218.406 26.4147 229.652 26.7636C230.143 26.7788 230.647 26.785 231.654 26.7975C233.911 26.8255 235.039 26.8395 236.037 26.8898C259.563 28.0742 279.435 44.7107 284.689 67.6205C284.912 68.5928 285.121 69.6991 285.541 71.9115C285.728 72.8991 285.822 73.3929 285.922 73.8723C288.219 84.8623 293.986 94.8284 302.377 102.308C302.743 102.635 303.125 102.962 303.888 103.618C305.599 105.087 306.454 105.821 307.187 106.5C324.445 122.495 328.95 147.983 318.215 168.903C317.76 169.791 317.208 170.773 316.104 172.737C315.611 173.613 315.364 174.052 315.132 174.483C309.812 184.375 307.809 195.708 309.418 206.82C309.488 207.304 309.569 207.8 309.732 208.792C310.096 211.014 310.278 212.125 310.402 213.115C313.318 236.436 300.347 258.851 278.647 267.991C277.726 268.379 276.67 268.778 274.559 269.574C273.617 269.929 273.146 270.107 272.69 270.289C262.241 274.455 253.406 281.852 247.48 291.395C247.221 291.811 246.964 292.243 246.449 293.107C245.297 295.043 244.721 296.011 244.178 296.849C231.387 316.584 207.011 325.436 184.498 318.521C183.543 318.228 182.477 317.856 180.347 317.112C179.396 316.78 178.921 316.614 178.455 316.461C167.767 312.951 156.233 312.951 145.545 316.461C145.079 316.614 144.603 316.78 143.652 317.112C141.522 317.856 140.457 318.228 139.502 318.521C116.989 325.436 92.6128 316.584 79.8221 296.849C79.2792 296.011 78.7029 295.043 77.5503 293.107C77.0358 292.243 76.7785 291.811 76.52 291.395C70.5939 281.852 61.7583 274.455 51.3096 270.289C50.8539 270.107 50.3827 269.929 49.4404 269.574C47.3294 268.778 46.274 268.379 45.3529 267.991C23.6523 258.851 10.6819 236.436 13.598 213.115C13.7218 212.125 13.9039 211.014 14.2682 208.792C14.4308 207.8 14.5121 207.304 14.5822 206.82C16.1908 195.708 14.188 184.375 8.86748 174.483C8.63542 174.052 8.389 173.613 7.89616 172.737C6.79213 170.773 6.24011 169.791 5.78449 168.903C-4.95014 147.983 -0.445588 122.495 16.8128 106.5C17.5454 105.821 18.4007 105.087 20.1113 103.618C20.875 102.962 21.2568 102.635 21.6228 102.308C30.0134 94.8284 35.7804 84.8623 38.0777 73.8723C38.1779 73.393 38.2715 72.8991 38.4588 71.9115C38.8783 69.699 39.088 68.5928 39.311 67.6204C44.5652 44.7107 64.4369 28.0742 87.9623 26.8898C88.9608 26.8395 90.0891 26.8255 92.3458 26.7975C93.3531 26.785 93.8568 26.7788 94.3473 26.7636C105.594 26.4147 116.432 22.4788 125.272 15.5333C125.658 15.2303 126.048 14.9121 126.828 14.2756Z',
      viewBox: '0 0 324 321',
    },
    {
      d: 'M136.697 9.84583C137.238 9.31569 137.508 9.05063 137.743 8.82982C150.246 -2.94327 169.754 -2.94327 182.257 8.82982C182.492 9.05063 182.762 9.31569 183.303 9.84583C183.628 10.1639 183.79 10.323 183.945 10.4703C191.945 18.1056 203.282 21.1433 214.028 18.5311C214.235 18.4807 214.456 18.4242 214.896 18.311C215.63 18.1224 215.996 18.0282 216.31 17.9542C233.024 14.0098 249.919 23.7642 254.86 40.2114C254.953 40.5199 255.055 40.8847 255.258 41.6143C255.38 42.0522 255.442 42.2711 255.502 42.4758C258.613 53.0884 266.912 61.3875 277.524 64.4985C277.729 64.5585 277.948 64.6195 278.386 64.7417C279.115 64.9452 279.48 65.0469 279.789 65.1396C296.236 70.0808 305.99 86.9759 302.046 103.69C301.972 104.004 301.878 104.371 301.689 105.104C301.576 105.544 301.519 105.765 301.469 105.972C298.857 116.718 301.894 128.055 309.53 136.055C309.677 136.21 309.836 136.372 310.154 136.697C310.684 137.238 310.949 137.508 311.17 137.743C322.943 150.246 322.943 169.754 311.17 182.257C310.949 182.492 310.684 182.762 310.154 183.303C309.836 183.628 309.677 183.79 309.53 183.945C301.894 191.945 298.857 203.282 301.469 214.028C301.519 214.235 301.576 214.456 301.689 214.896C301.878 215.629 301.972 215.996 302.046 216.31C305.99 233.024 296.236 249.919 279.789 254.86C279.48 254.953 279.115 255.055 278.386 255.258C277.948 255.381 277.729 255.442 277.524 255.502C266.912 258.613 258.613 266.912 255.502 277.524C255.442 277.729 255.381 277.948 255.258 278.386C255.055 279.115 254.953 279.48 254.86 279.789C249.919 296.236 233.024 305.99 216.31 302.046C215.996 301.972 215.629 301.878 214.896 301.689C214.456 301.576 214.235 301.519 214.028 301.469C203.282 298.857 191.945 301.894 183.945 309.53C183.79 309.677 183.628 309.836 183.303 310.154C182.762 310.684 182.492 310.949 182.257 311.17C169.754 322.943 150.246 322.943 137.743 311.17C137.508 310.949 137.238 310.684 136.697 310.154C136.372 309.836 136.21 309.677 136.055 309.53C128.055 301.894 116.718 298.857 105.972 301.469C105.765 301.519 105.544 301.576 105.104 301.689C104.371 301.878 104.004 301.972 103.69 302.046C86.9759 305.99 70.0808 296.236 65.1396 279.789C65.0469 279.48 64.9452 279.115 64.7417 278.386C64.6195 277.948 64.5585 277.729 64.4985 277.524C61.3875 266.912 53.0884 258.613 42.4758 255.502C42.2711 255.442 42.0522 255.38 41.6143 255.258C40.8847 255.055 40.5199 254.953 40.2114 254.86C23.7642 249.919 14.0098 233.024 17.9542 216.31C18.0282 215.996 18.1224 215.63 18.311 214.896C18.4242 214.456 18.4807 214.235 18.5311 214.028C21.1433 203.282 18.1056 191.945 10.4703 183.945C10.323 183.79 10.1639 183.628 9.84583 183.303C9.31569 182.762 9.05063 182.492 8.82982 182.257C-2.94327 169.754 -2.94327 150.246 8.82982 137.743C9.05063 137.508 9.31569 137.238 9.84583 136.697C10.1639 136.372 10.323 136.21 10.4703 136.055C18.1056 128.055 21.1433 116.718 18.5311 105.972C18.4807 105.765 18.4242 105.544 18.311 105.104C18.1224 104.371 18.0282 104.004 17.9542 103.69C14.0098 86.9759 23.7642 70.0808 40.2114 65.1396C40.5199 65.0469 40.8847 64.9452 41.6143 64.7417C42.0522 64.6195 42.2711 64.5585 42.4758 64.4985C53.0884 61.3875 61.3875 53.0884 64.4985 42.4758C64.5585 42.2711 64.6195 42.0522 64.7417 41.6143C64.9452 40.8847 65.0469 40.5199 65.1396 40.2114C70.0808 23.7642 86.9759 14.0098 103.69 17.9542C104.004 18.0282 104.371 18.1224 105.104 18.311C105.544 18.4242 105.765 18.4807 105.972 18.5311C116.718 21.1433 128.055 18.1056 136.055 10.4703C136.21 10.323 136.372 10.1639 136.697 9.84583Z',
      viewBox: '0 0 320 320',
    },
    {
      d: 'M21.0014 148C7.89536 132.339 0 112.126 0 90.0596C0 40.321 40.1131 0 89.5951 0C111.99 0 132.466 8.2594 148.173 21.9131C163.843 8.2594 184.271 0 206.614 0C255.981 0 296 40.321 296 90.0596C296 112.126 288.123 132.339 275.048 148C288.123 163.661 296 183.874 296 205.94C296 255.679 255.981 296 206.614 296C184.271 296 163.843 287.741 148.173 274.087C132.466 287.741 111.99 296 89.5951 296C40.1131 296 0 255.679 0 205.94C0 183.874 7.89536 163.661 21.0014 148Z',
      viewBox: '0 0 296 296',
    },
    {
      d: 'M308.584 159.998C334.427 208.164 314.902 251.771 265.066 265.061C251.771 314.902 208.164 334.422 159.998 308.584C111.831 334.427 68.2245 314.902 54.9337 265.066C5.09812 251.771 -14.427 208.164 11.4157 159.998C-14.427 111.831 5.09812 68.2245 54.9337 54.9337C68.2245 5.09812 111.831 -14.427 159.998 11.4157C208.164 -14.427 251.771 5.09812 265.061 54.9337C314.902 68.2245 334.422 111.831 308.584 159.998Z',
      viewBox: '0 0 320 320',
    },
    {
      d: 'M145.147 8.15077C151.983 -2.71691 168.017 -2.71693 174.853 8.15075L191.238 34.2009C195.731 41.3458 204.797 44.2506 212.692 41.0751L241.475 29.4972C253.482 24.6671 266.455 33.9613 265.507 46.7154L263.235 77.2876C262.612 85.6727 268.215 93.2776 276.494 95.2843L306.681 102.601C319.275 105.653 324.23 120.692 315.861 130.461L295.8 153.877C290.298 160.3 290.298 169.7 295.8 176.123L315.861 199.539C324.23 209.308 319.275 224.347 306.681 227.399L276.494 234.716C268.215 236.722 262.612 244.327 263.235 252.712L265.507 283.285C266.455 296.039 253.482 305.333 241.475 300.503L212.692 288.925C204.797 285.749 195.731 288.654 191.238 295.799L174.853 321.849C168.017 332.717 151.983 332.717 145.147 321.849L128.762 295.799C124.269 288.654 115.203 285.749 107.308 288.925L78.5255 300.503C66.5177 305.333 53.5454 296.039 54.4931 283.285L56.7649 252.712C57.388 244.327 51.785 236.722 43.5056 234.716L13.3186 227.399C0.725189 224.347 -4.22982 209.308 4.1391 199.539L24.1997 176.123C29.7018 169.7 29.7018 160.3 24.1997 153.877L4.13911 130.461C-4.22981 120.692 0.725169 105.653 13.3186 102.601L43.5056 95.2843C51.785 93.2776 57.388 85.6727 56.7649 77.2876L54.4931 46.7154C53.5454 33.9613 66.5177 24.6671 78.5254 29.4972L107.308 41.0751C115.203 44.2506 124.269 41.3458 128.762 34.201L145.147 8.15077Z',
      viewBox: '0 0 320 330',
    },
  ] as const;

  protected readonly current = signal<{ d: string; viewBox: string }>(
    this.shapes[0],
  );

  constructor() {
    effect(() => {
      const _ = this.changeSignal();
      const newShapeIndex = Math.floor(Math.random() * this.shapes.length);
      this.current.set(this.shapes[newShapeIndex]);
    });
  }
}
